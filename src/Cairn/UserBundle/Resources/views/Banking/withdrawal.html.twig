{# src/Cairn/UserBundle/Resources/views/Banking/withdrawal.html.twig #}

{% extends "CairnUserBundle::layout.html.twig" %}

{% block body %}
    {{parent()}}

    <div class="well">
      {{ form_start(formUser) }}
      {{ form_rest(formUser) }}
      {{ form_end(formUser) }}

    </div>

    <div class="well">
      {{ form_start(formWithdrawal) }}
      {{ form_widget(formWithdrawal.fromAccount, {'attr': {'class':'hidden-row'} }) }}
      {{ form_rest(formWithdrawal) }}
      {{ form_end(formWithdrawal) }}

    </div>

    {{include("CairnUserBundle:Banking:accounts_list.html.twig",{'accounts':accounts,'type':'debit'})}}

{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>

    <script>
        jQuery(function ($) {
            $formAccountOwner = $('#withdrawal_fromAccount_owner');    
            $formAccountId = $('#withdrawal_fromAccount_id');    
           
            $containerAccount = $('.account'); 
            $containerAccount.click(function (e){
                $formAccountOwner.val($(this).children("em")[0].innerText) ;
                $formAccountId.val($(this).children("span:last")[0].innerText);
            });
        });
    </script>
{% endblock %}
